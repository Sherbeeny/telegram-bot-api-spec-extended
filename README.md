# Telegram Bot API Spec Extended

This repository automatically generates and maintains an extended version of the official Telegram Bot API specification. The extended specification includes additional information that is not present in the official spec, such as rate limits, premium features, and other details that are useful for developers.

## `api.json` vs `spec-extended.json`

- **`api.json`**: This is the official Telegram Bot API specification, which is pulled daily from the [official repository](https://github.com/PaulSonOfLars/telegram-bot-api-spec). It contains the base information about the API, such as methods, types, and fields.
- **`spec-extended.json`**: This is the extended specification, which is generated by this project. It includes all the information from `api.json`, plus additional information that is not present in the official spec. This additional information is stored in the `extensions.json` file and then merged with `api.json` to create `spec-extended.json`.

## Structure of `spec-extended.json`

The `spec-extended.json` file is a valid OpenAPI specification that includes all the information from `api.json`, plus additional information in the form of `x-` extensions. For example, a method in `spec-extended.json` might look like this:

```json
{
  "sendMessage": {
    "description": "Use this method to send text messages.",
    "parameters": [
      {
        "name": "chat_id",
        "in": "query",
        "description": "Unique identifier for the target chat or username of the target channel (in the format @channelusername)",
        "schema": {
          "type": "integer"
        }
      },
      {
        "name": "text",
        "in": "query",
        "description": "Text of the message to be sent",
        "schema": {
          "type": "string"
        }
      }
    ],
    "responses": {
      "200": {
        "description": "On success, the sent Message is returned.",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Message"
            }
          }
        }
      }
    },
    "x-rate-limit": {
      "per_chat": 1,
      "per_second": 30
    },
    "x-premium-restrictions": {
      "max_message_length": 4096
    }
  }
}
```

## How it works

The project uses a set of Python scripts to scrape data from various sources, process it, and generate the extended specification.

### Scraping

The `scraper.py` script is responsible for scraping data from the following sources:

- [Telegram Bot API documentation](https://core.telegram.org/bots/api)
- [Telegram Bot API FAQ](https://core.telegram.org/bots/faq)
- [Telegram Bot API Features](https://core.telegram.org/bots/features)

The script uses the `requests` and `BeautifulSoup` libraries to fetch and parse the HTML content of these pages. It then extracts the relevant information and stores it in a dictionary.

### AI Component

The `update_extensions.py` script uses a lightweight AI component to process the scraped data and structure it in a more optimal way. The AI component uses the `scikit-learn` library to perform clustering on the descriptions of the methods, types, and other entities. This helps to group related entities together and identify patterns in the data.

The AI component is still under development, and we are working on improving its accuracy and capabilities.

## How to use it

To generate the extended specification, you can run the following command:

```bash
python3 update_extensions.py && python3 merge.py
```

This will generate the `spec-extended.json` and `spec-extended.min.json` files in the root of the repository.

## Contributing

Contributions are welcome! Please feel free to open an issue or submit a pull request.
